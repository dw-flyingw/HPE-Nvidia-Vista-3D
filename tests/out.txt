--- Vista3D Batch Segmentation Script ---
Output Segmentation directory: /home/hpadmin/NV/output/segments
------------------------------------------

Processing patient folder: /home/hpadmin/NV/output/nifti/PA00000002
--------------------------------------------------
Segmenting ALL available labels from label_dict.json.
Requesting segmentation for vessel IDs: [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 19, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 132]
Found 3 NIfTI files to process in PA00000002.

--- Starting Segmentation ---

  Processing: 03_CORONAL_ABDOMEN.nii.gz
    Input URL for Vista3D: https://host.docker.internal:8888/output/nifti/PA00000002/03_CORONAL_ABDOMEN.nii.gz
    Requesting segmentation for: ['liver', 'spleen', 'pancreas', 'right kidney', 'aorta', 'inferior vena cava', 'right adrenal gland', 'left adrenal gland', 'gallbladder', 'esophagus', 'stomach', 'duodenum', 'left kidney', 'bladder', 'portal vein and splenic vein', 'small bowel', 'brain', 'lung tumor', 'pancreatic tumor', 'hepatic vessel', 'hepatic tumor', 'colon cancer primaries', 'left lung upper lobe', 'left lung lower lobe', 'right lung upper lobe', 'right lung middle lobe', 'right lung lower lobe', 'vertebrae L5', 'vertebrae L4', 'vertebrae L3', 'vertebrae L2', 'vertebrae L1', 'vertebrae T12', 'vertebrae T11', 'vertebrae T10', 'vertebrae T9', 'vertebrae T8', 'vertebrae T7', 'vertebrae T6', 'vertebrae T5', 'vertebrae T4', 'vertebrae T3', 'vertebrae T2', 'vertebrae T1', 'vertebrae C7', 'vertebrae C6', 'vertebrae C5', 'vertebrae C4', 'vertebrae C3', 'vertebrae C2', 'vertebrae C1', 'trachea', 'left iliac artery', 'right iliac artery', 'left iliac vena', 'right iliac vena', 'colon', 'left rib 1', 'left rib 2', 'left rib 3', 'left rib 4', 'left rib 5', 'left rib 6', 'left rib 7', 'left rib 8', 'left rib 9', 'left rib 10', 'left rib 11', 'left rib 12', 'right rib 1', 'right rib 2', 'right rib 3', 'right rib 4', 'right rib 5', 'right rib 6', 'right rib 7', 'right rib 8', 'right rib 9', 'right rib 10', 'right rib 11', 'right rib 12', 'left humerus', 'right humerus', 'left scapula', 'right scapula', 'left clavicula', 'right clavicula', 'left femur', 'right femur', 'left hip', 'right hip', 'sacrum', 'left gluteus maximus', 'right gluteus maximus', 'left gluteus medius', 'right gluteus medius', 'left gluteus minimus', 'right gluteus minimus', 'left autochthon', 'right autochthon', 'left iliopsoas', 'right iliopsoas', 'left atrial appendage', 'brachiocephalic trunk', 'left brachiocephalic vein', 'right brachiocephalic vein', 'left common carotid artery', 'right common carotid artery', 'costal cartilages', 'heart', 'left kidney cyst', 'right kidney cyst', 'prostate', 'pulmonary vein', 'skull', 'spinal cord', 'sternum', 'left subclavian artery', 'right subclavian artery', 'superior vena cava', 'thyroid gland', 'vertebrae S1', 'bone lesion', 'airway'] (IDs: [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 19, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 132])
    Attempting to save to: /home/hpadmin/NV/output/segments/PA00000002/03_CORONAL_ABDOMEN_seg.nii.gz
    NIfTI image shape before saving: (512, 512, 120)
    NIfTI image dtype before saving: uint8
    Successfully saved: 03_CORONAL_ABDOMEN_seg.nii.gz
    Saved NIfTI dtype: uint8
    Saved NIfTI shape: (512, 512, 120)
    Inference successful. Remapped and saved to: 03_CORONAL_ABDOMEN_seg.nii.gz

  Processing: 05_SAGITTAL_ABDOMEN.nii.gz
    Input URL for Vista3D: https://host.docker.internal:8888/output/nifti/PA00000002/05_SAGITTAL_ABDOMEN.nii.gz
    Requesting segmentation for: ['liver', 'spleen', 'pancreas', 'right kidney', 'aorta', 'inferior vena cava', 'right adrenal gland', 'left adrenal gland', 'gallbladder', 'esophagus', 'stomach', 'duodenum', 'left kidney', 'bladder', 'portal vein and splenic vein', 'small bowel', 'brain', 'lung tumor', 'pancreatic tumor', 'hepatic vessel', 'hepatic tumor', 'colon cancer primaries', 'left lung upper lobe', 'left lung lower lobe', 'right lung upper lobe', 'right lung middle lobe', 'right lung lower lobe', 'vertebrae L5', 'vertebrae L4', 'vertebrae L3', 'vertebrae L2', 'vertebrae L1', 'vertebrae T12', 'vertebrae T11', 'vertebrae T10', 'vertebrae T9', 'vertebrae T8', 'vertebrae T7', 'vertebrae T6', 'vertebrae T5', 'vertebrae T4', 'vertebrae T3', 'vertebrae T2', 'vertebrae T1', 'vertebrae C7', 'vertebrae C6', 'vertebrae C5', 'vertebrae C4', 'vertebrae C3', 'vertebrae C2', 'vertebrae C1', 'trachea', 'left iliac artery', 'right iliac artery', 'left iliac vena', 'right iliac vena', 'colon', 'left rib 1', 'left rib 2', 'left rib 3', 'left rib 4', 'left rib 5', 'left rib 6', 'left rib 7', 'left rib 8', 'left rib 9', 'left rib 10', 'left rib 11', 'left rib 12', 'right rib 1', 'right rib 2', 'right rib 3', 'right rib 4', 'right rib 5', 'right rib 6', 'right rib 7', 'right rib 8', 'right rib 9', 'right rib 10', 'right rib 11', 'right rib 12', 'left humerus', 'right humerus', 'left scapula', 'right scapula', 'left clavicula', 'right clavicula', 'left femur', 'right femur', 'left hip', 'right hip', 'sacrum', 'left gluteus maximus', 'right gluteus maximus', 'left gluteus medius', 'right gluteus medius', 'left gluteus minimus', 'right gluteus minimus', 'left autochthon', 'right autochthon', 'left iliopsoas', 'right iliopsoas', 'left atrial appendage', 'brachiocephalic trunk', 'left brachiocephalic vein', 'right brachiocephalic vein', 'left common carotid artery', 'right common carotid artery', 'costal cartilages', 'heart', 'left kidney cyst', 'right kidney cyst', 'prostate', 'pulmonary vein', 'skull', 'spinal cord', 'sternum', 'left subclavian artery', 'right subclavian artery', 'superior vena cava', 'thyroid gland', 'vertebrae S1', 'bone lesion', 'airway'] (IDs: [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 19, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 132])
    Attempting to save to: /home/hpadmin/NV/output/segments/PA00000002/05_SAGITTAL_ABDOMEN_seg.nii.gz
    NIfTI image shape before saving: (512, 512, 120)
    NIfTI image dtype before saving: uint8
    Successfully saved: 05_SAGITTAL_ABDOMEN_seg.nii.gz
    Saved NIfTI dtype: uint8
    Saved NIfTI shape: (512, 512, 120)
    Inference successful. Remapped and saved to: 05_SAGITTAL_ABDOMEN_seg.nii.gz

  Processing: 01_2.5MM_ARTERIAL.nii.gz
    Input URL for Vista3D: https://host.docker.internal:8888/output/nifti/PA00000002/01_2.5MM_ARTERIAL.nii.gz
    Requesting segmentation for: ['liver', 'spleen', 'pancreas', 'right kidney', 'aorta', 'inferior vena cava', 'right adrenal gland', 'left adrenal gland', 'gallbladder', 'esophagus', 'stomach', 'duodenum', 'left kidney', 'bladder', 'portal vein and splenic vein', 'small bowel', 'brain', 'lung tumor', 'pancreatic tumor', 'hepatic vessel', 'hepatic tumor', 'colon cancer primaries', 'left lung upper lobe', 'left lung lower lobe', 'right lung upper lobe', 'right lung middle lobe', 'right lung lower lobe', 'vertebrae L5', 'vertebrae L4', 'vertebrae L3', 'vertebrae L2', 'vertebrae L1', 'vertebrae T12', 'vertebrae T11', 'vertebrae T10', 'vertebrae T9', 'vertebrae T8', 'vertebrae T7', 'vertebrae T6', 'vertebrae T5', 'vertebrae T4', 'vertebrae T3', 'vertebrae T2', 'vertebrae T1', 'vertebrae C7', 'vertebrae C6', 'vertebrae C5', 'vertebrae C4', 'vertebrae C3', 'vertebrae C2', 'vertebrae C1', 'trachea', 'left iliac artery', 'right iliac artery', 'left iliac vena', 'right iliac vena', 'colon', 'left rib 1', 'left rib 2', 'left rib 3', 'left rib 4', 'left rib 5', 'left rib 6', 'left rib 7', 'left rib 8', 'left rib 9', 'left rib 10', 'left rib 11', 'left rib 12', 'right rib 1', 'right rib 2', 'right rib 3', 'right rib 4', 'right rib 5', 'right rib 6', 'right rib 7', 'right rib 8', 'right rib 9', 'right rib 10', 'right rib 11', 'right rib 12', 'left humerus', 'right humerus', 'left scapula', 'right scapula', 'left clavicula', 'right clavicula', 'left femur', 'right femur', 'left hip', 'right hip', 'sacrum', 'left gluteus maximus', 'right gluteus maximus', 'left gluteus medius', 'right gluteus medius', 'left gluteus minimus', 'right gluteus minimus', 'left autochthon', 'right autochthon', 'left iliopsoas', 'right iliopsoas', 'left atrial appendage', 'brachiocephalic trunk', 'left brachiocephalic vein', 'right brachiocephalic vein', 'left common carotid artery', 'right common carotid artery', 'costal cartilages', 'heart', 'left kidney cyst', 'right kidney cyst', 'prostate', 'pulmonary vein', 'skull', 'spinal cord', 'sternum', 'left subclavian artery', 'right subclavian artery', 'superior vena cava', 'thyroid gland', 'vertebrae S1', 'bone lesion', 'airway'] (IDs: [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 19, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 132])
    Attempting to save to: /home/hpadmin/NV/output/segments/PA00000002/01_2.5MM_ARTERIAL_seg.nii.gz
    NIfTI image shape before saving: (512, 512, 146)
    NIfTI image dtype before saving: uint8
    Successfully saved: 01_2.5MM_ARTERIAL_seg.nii.gz
    Saved NIfTI dtype: uint8
    Saved NIfTI shape: (512, 512, 146)
    Inference successful. Remapped and saved to: 01_2.5MM_ARTERIAL_seg.nii.gz

--- Segmentation Process Complete ---
Successful patient segmentations: 3
Failed patient segmentations: 0
-------------------------------------
You can now view the segmented files in your Streamlit app by selecting them from the 'output/segments/<patient_folder>' folder.
