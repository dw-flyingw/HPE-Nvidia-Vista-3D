╔════════════════════════════════════════════════════════════════════════════╗
║                     UBUNTU DOCKER COMPOSE - QUICK REFERENCE                ║
╚════════════════════════════════════════════════════════════════════════════╝

📋 SCENARIO: Frontend shows "❌ Offline • http://host.docker.internal:8000"
           but server is reachable at http://localhost:8000/v1/health/live

🔧 QUICK FIX:

  1️⃣  Create .env file in frontend/ directory:
      
      VISTA3D_SERVER="http://vista3d-server:8000"
      VISTA3D_IMAGE_SERVER_URL="http://image-server:8888"
      IMAGE_SERVER="http://localhost:8888"
      DICOM_FOLDER="/path/to/dicom"
      OUTPUT_FOLDER="/path/to/output"

  2️⃣  Start containers from frontend/ directory:
      
      docker-compose up -d

  3️⃣  Verify it works:
      
      docker exec vista3d-frontend-standalone \
        curl -v http://vista3d-server:8000/v1/vista3d/info

      ✅ Should return HTTP 200 (not connection refused)

✅ WHAT CHANGED:

   ✓ frontend/docker-compose.yml     → Added vista3d-network
   ✓ backend/docker-compose.yml      → Added host-gateway, networking
   ✓ docs/LINUX_DEPLOYMENT.md        → Full reference guide
   ✓ .env.linux-example              → Environment template

📚 DOCUMENTATION:

   Start here:  docs/LINUX_DEPLOYMENT.md
   Quick fix:   LINUX_SETUP_QUICK_FIX.md
   Template:    .env.linux-example

🌍 3 DEPLOYMENT OPTIONS:

   Option 1: Same server (frontend & backend on same Ubuntu)
             ✅ Fastest, recommended
             Use: VISTA3D_SERVER="http://vista3d-server:8000"

   Option 2: Different servers (frontend & backend on different Ubuntu boxes)
             Use: VISTA3D_SERVER="http://<backend-ip>:8000"
             Remember: sudo ufw allow 8000/tcp

   Option 3: Mac development → Ubuntu backend (via SSH tunnel)
             ssh -L 8000:localhost:8000 -R 8888:localhost:8888 user@ubuntu
             Use: VISTA3D_SERVER="http://host.docker.internal:8000"

🐛 TROUBLESHOOTING:

   ❌ Still offline?
      → docker-compose up -d --force-recreate

   ❌ Port already in use?
      → sudo lsof -i :8000

   ❌ Containers can't talk?
      → docker network inspect vista3d_vista3d-network

   ❌ Firewall blocking?
      → sudo ufw allow 8000/tcp

═══════════════════════════════════════════════════════════════════════════════
